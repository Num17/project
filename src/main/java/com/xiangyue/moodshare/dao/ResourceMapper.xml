<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiangyue.moodshare.dao.ResourceMapper">
	<insert id="saveResource" parameterType="com.xiangyue.moodshare.entity.Resource"
		useGeneratedKeys="true" keyProperty="id">
		insert into
		resource(resource_name,resource_time,resource_score,resource_position,resource_user)
		values(#{name},#{time},#{score},#{position},#{userId})

	</insert>


	<select id="selectAllResources" resultType="com.xiangyue.moodshare.entity.Resource">
		select resource_name
		name from resource
	</select>

	<delete id="delectResource" parameterType="java.lang.Integer">
		delete from resource
		where resource_id=#{id}
	</delete>

	<select id="selectAllResourcesAndUsers" resultMap="resourcesAndUsers">
		select
		resource_id,resource_name,resource_time,resource_score,resource_user from resource
	</select>
	<resultMap type="com.xiangyue.moodshare.entity.Resource" id="resourcesAndUsers">
	    <result column="resource_id" property="id"/>
		<result column="resource_name" property="name" />
		<result column="resource_time" property="time"/>
		<result column="resource_score" property="score"/>
		<association column="resource_user" property="user"
			javaType="com.xiangyue.moodshare.entity.User" select="com.xiangyue.moodshare.dao.UserDao.getById"></association>
	</resultMap>
	<select id="selectResourceById" parameterType="java.lang.Integer" resultType="com.xiangyue.moodshare.entity.Resource">
		select resource_name name from resource where resource_id=#{id} 
	</select>
</mapper>